<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Camanor - Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/notifications.css">
  <link rel="stylesheet" href="css/attachments.css">
  <link rel="stylesheet" href="css/water-params.css">
  <link rel="icon" href="img/favicon.ico">
  <!-- Chart.js será carregado no final do documento -->
</head>

<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <img src="img/logo_camanor.png" alt="Camanor" class="sidebar-logo">
        <!-- <button id="close-sidebar" class="btn-icon">
          <i class="fas fa-times"></i>
        </button> -->
      </div>
      <nav class="sidebar-nav">
        <ul>
          <li class="active">
            <a href="dashboard.html">
              <i class="fas fa-tachometer-alt"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="ciclo-dashboard.html">
              <i class="fas fa-chart-line"></i>
              <span>Ciclos</span>
            </a>
          </li>
          <li>
            <a href="analises.html">
              <i class="fas fa-flask"></i>
              <span>Análises</span>
            </a>
          </li>
          <li>
            <a href="#">
              <i class="fas fa-shrimp"></i>
              <span>Tanques</span>
            </a>
          </li>
          <li>
            <a href="#">
              <i class="fas fa-warehouse"></i>
              <span>Estoque</span>
            </a>
          </li>
          <li>
            <a href="#">
              <i class="fas fa-users"></i>
              <span>Usuários</span>
            </a>
          </li>
          <li>
            <a href="messenger.html">
              <i class="fas fa-comments"></i>
              <span>Messenger</span>
            </a>
          </li>
          <li>
            <a href="contato.html">
              <i class="fas fa-envelope"></i>
              <span>Contato</span>
            </a>
          </li>
          <li>
            <a href="#">
              <i class="fas fa-cog"></i>
              <span>Configurações</span>
            </a>
          </li>
        </ul>
      </nav>
      <div class="sidebar-footer">
        <a href="index.html" class="btn-logout">
          <i class="fas fa-sign-out-alt"></i>
          <span>Sair</span>
        </a>
      </div>
    </aside>

    <main class="main-content">
      <!-- Top Bar -->
      <div class="top-bar">
        <button id="sidebar-toggle" class="btn-icon">
          <i class="fas fa-bars"></i>
        </button>
        <div class="search-container">
          <input type="text" placeholder="Buscar..." class="search-input">
          <button class="btn-icon">
            <i class="fas fa-search"></i>
          </button>
        </div>
        <div class="top-bar-actions">
          <div class="notification-container">
            <button class="btn-icon notification-btn" id="notification-toggle">
              <i class="fas fa-bell"></i>
              <span class="badge-icon">3</span>
            </button>

            <!-- Dropdown de Notificações -->
            <div class="notifications-dropdown" id="notifications-dropdown">
              <div class="notifications-header">
                <h3>Notificações</h3>
                <button class="mark-all-read">Marcar todas como lidas</button>
              </div>
              <div class="notifications-body">
                <div class="notification-item unread" data-user="maria" data-chat-id="1">
                  <img src="img/user.png" alt="Maria Santos" class="notification-avatar">
                  <div class="notification-content">
                    <div class="notification-title">Maria Santos</div>
                    <div class="notification-message">Vamos verificar os parâmetros do tanque V03
                      pessoalmente após o almoço?</div>
                    <div class="notification-time">10:30</div>
                  </div>
                </div>
                <div class="notification-item unread" data-user="carlos" data-chat-id="2">
                  <img src="img/user2.jpg" alt="Carlos Oliveira" class="notification-avatar">
                  <div class="notification-content">
                    <div class="notification-title">Carlos Oliveira</div>
                    <div class="notification-message">Relatório de biometria concluído. Preciso da
                      sua aprovação.</div>
                    <div class="notification-time">09:15</div>
                  </div>
                </div>
                <div class="notification-item" data-user="ana" data-chat-id="3">
                  <img src="img/user3.jpg" alt="Ana Silva" class="notification-avatar">
                  <div class="notification-content">
                    <div class="notification-title">Ana Silva</div>
                    <div class="notification-message">Precisamos discutir o arraçoamento do ciclo
                      #42 com urgência.</div>
                    <div class="notification-time">Ontem</div>
                  </div>
                </div>
              </div>
              <div class="notifications-footer">
                <a href="messenger.html">Ver todas as mensagens</a>
              </div>
            </div>
          </div>

          <div class="user-profile">
            <img src="img/user.png" alt="Usuário" class="profile-img">
            <div class="user-info">
              <span class="profile-name">João Silva</span>
              <div class="user-status-selector">
                <span class="current-status">
                  <span class="status-badge status-online"></span>
                  <span class="status-text">Online</span>
                  <i class="fas fa-chevron-down"></i>
                </span>
                <div class="status-dropdown">
                  <div class="status-option" data-status="online">
                    <span class="status-badge status-online"></span>
                    <span>Online</span>
                  </div>
                  <div class="status-option" data-status="away">
                    <span class="status-badge status-away"></span>
                    <span>Ausente</span>
                  </div>
                  <div class="status-option" data-status="busy">
                    <span class="status-badge status-busy"></span>
                    <span>Ocupado</span>
                  </div>
                  <div class="status-option" data-status="offline">
                    <span class="status-badge status-offline"></span>
                    <span>Aparecer Offline</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="dashboard-content">
        <h1 class="page-title animate-on-load">Dashboard</h1>

        <!-- Stats Cards -->
        <div class="dashboard-cards">
          <div class="card animate-on-load">
            <div class="card-content">
              <div class="card-info">
                <h3 class="card-title">Análises Totais</h3>
                <p class="card-value">1,234</p>
                <p class="card-trend up">
                  <i class="fas fa-arrow-up"></i>
                  <span>12% desde o último mês</span>
                </p>
              </div>
              <div class="card-icon">
                <canvas id="analises-chart" width="60" height="60"></canvas>
              </div>
            </div>
          </div>

          <div class="card animate-on-load" style="animation-delay: 0.1s;">
            <div class="card-content">
              <div class="card-info">
                <h3 class="card-title">Ciclos Ativos</h3>
                <p class="card-value">42</p>
                <p class="card-trend up">
                  <i class="fas fa-arrow-up"></i>
                  <span>8% desde o último mês</span>
                </p>
              </div>
              <div class="card-icon">
                <canvas id="ciclos-chart" width="60" height="60"></canvas>
              </div>
            </div>
          </div>

          <div class="card animate-on-load" style="animation-delay: 0.2s;">
            <div class="card-content">
              <div class="card-info">
                <h3 class="card-title">Produção Total</h3>
                <p class="card-value">8,543 kg</p>
                <p class="card-trend up">
                  <i class="fas fa-arrow-up"></i>
                  <span>15% desde o último mês</span>
                </p>
              </div>
              <div class="card-icon">
                <canvas id="producao-chart" width="60" height="60"></canvas>
              </div>
            </div>
          </div>

          <div class="card animate-on-load" style="animation-delay: 0.3s;">
            <div class="card-content">
              <div class="card-info">
                <h3 class="card-title">Taxa de Conclusão</h3>
                <p class="card-value">87%</p>
                <p class="card-trend down">
                  <i class="fas fa-arrow-down"></i>
                  <span>3% desde o último mês</span>
                </p>
              </div>
              <div class="card-icon">
                <canvas id="conclusao-chart" width="60" height="60"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Parâmetros de Qualidade de Água -->
        <!-- <div class="water-quality-container animate-on-load">
            <h2 class="section-title">Parâmetros de Qualidade de Água</h2>
            <div class="water-quality-buttons">
                <button class="water-param-btn oxygen-btn animate-pulse">
                    <div class="param-icon">
                        <i class="fas fa-wind"></i>
                    </div>
                    <div class="param-info">
                        <span class="param-name">Oxigênio</span>
                        <span class="param-value">5.8 mg/L</span>
                    </div>
                    <div class="param-status good"></div>
                </button>
                
                <button class="water-param-btn ph-btn animate-pulse">
                    <div class="param-icon">
                        <i class="fas fa-flask"></i>
                    </div>
                    <div class="param-info">
                        <span class="param-name">pH</span>
                        <span class="param-value">7.2</span>
                    </div>
                    <div class="param-status good"></div>
                </button>
                
                <button class="water-param-btn temperature-btn animate-pulse">
                    <div class="param-icon">
                        <i class="fas fa-temperature-high"></i>
                    </div>
                    <div class="param-info">
                        <span class="param-name">Temperatura</span>
                        <span class="param-value">28.5 °C</span>
                    </div>
                    <div class="param-status good"></div>
                </button>
                
                <button class="water-param-btn salinity-btn animate-pulse">
                    <div class="param-icon">
                        <i class="fas fa-tint"></i>
                    </div>
                    <div class="param-info">
                        <span class="param-name">Salinidade</span>
                        <span class="param-value">12 ppt</span>
                    </div>
                    <div class="param-status warning"></div>
                </button>
                
                <button class="water-param-btn ammonia-btn animate-pulse">
                    <div class="param-icon">
                        <i class="fas fa-vial"></i>
                    </div>
                    <div class="param-info">
                        <span class="param-name">Amônia</span>
                        <span class="param-value">0.05 mg/L</span>
                    </div>
                    <div class="param-status good"></div>
                </button>
                
                <button class="water-param-btn nitrite-btn animate-pulse">
                    <div class="param-icon">
                        <i class="fas fa-atom"></i>
                    </div>
                    <div class="param-info">
                        <span class="param-name">Nitrito</span>
                        <span class="param-value">0.01 mg/L</span>
                    </div>
                    <div class="param-status good"></div>
                </button>
            </div>
        </div> -->
        
        <!-- Main Charts -->
        <div class="row">
          <div class="col-lg-8 animate-on-load">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Produção Mensal</h3>
              </div>
              <div class="card-body">
                <canvas id="main-chart" height="300"></canvas>
              </div>
            </div>
          </div>

        </div>

        <!-- Tanques de Destaque -->
        <div class="row">
          <div class="col-lg-8 animate-on-load">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Tanques com Maior Crescimento</h3>
              </div>
              <div class="card-body">
                <canvas id="crescimento-chart" height="300"></canvas>
              </div>
            </div>
          </div>

          <div class="col-lg-4 animate-on-load">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Distribuição por Tanque</h3>
              </div>
              <div class="card-body">
                <canvas id="distribuicao-tanques-chart" height="300"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Mortalidade -->
        <div class="row">
          <div class="col-lg-8 animate-on-load">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Tanques com Menor Mortalidade</h3>
              </div>
              <div class="card-body">
                <canvas id="mortalidade-chart" height="300"></canvas>
              </div>
            </div>
          </div>

          <div class="col-lg-4 animate-on-load">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Taxa de Sobrevivência Média</h3>
              </div>
              <div class="card-body">
                <canvas id="sobrevivencia-media-chart" height="300"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Activity Table -->
        <div class="table-container animate-on-load">
          <div class="table-header">
            <h3 class="table-title">Atividades Recentes</h3>
            <div class="table-actions">
              <button class="btn btn-sm btn-outline-primary">
                <i class="fas fa-filter"></i> Filtrar
              </button>
              <button class="btn btn-sm btn-outline-primary">
                <i class="fas fa-download"></i> Exportar
              </button>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Atividade</th>
                  <th>Responsável</th>
                  <th>Data</th>
                  <th>Status</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#1234</td>
                  <td>Coleta de Parâmetros</td>
                  <td>Maria Santos</td>
                  <td>05/05/2025</td>
                  <td><span class="badge badge-success">Concluído</span></td>
                  <td>
                    <button class="btn-icon">
                      <i class="fas fa-eye"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>#1233</td>
                  <td>Arraçoamento</td>
                  <td>Carlos Oliveira</td>
                  <td>05/05/2025</td>
                  <td><span class="badge badge-success">Concluído</span></td>
                  <td>
                    <button class="btn-icon">
                      <i class="fas fa-eye"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>#1232</td>
                  <td>Biometria</td>
                  <td>Ana Silva</td>
                  <td>04/05/2025</td>
                  <td><span class="badge badge-warning">Pendente</span></td>
                  <td>
                    <button class="btn-icon">
                      <i class="fas fa-eye"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>#1231</td>
                  <td>Manutenção</td>
                  <td>Pedro Costa</td>
                  <td>04/05/2025</td>
                  <td><span class="badge badge-danger">Atrasado</span></td>
                  <td>
                    <button class="btn-icon">
                      <i class="fas fa-eye"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>#1230</td>
                  <td>Coleta de Parâmetros</td>
                  <td>Maria Santos</td>
                  <td>03/05/2025</td>
                  <td><span class="badge badge-success">Concluído</span></td>
                  <td>
                    <button class="btn-icon">
                      <i class="fas fa-eye"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal de Detalhes do Parâmetro -->
  <div id="param-detail-modal" class="param-modal">
    <div class="param-modal-content">
      <span class="param-modal-close">&times;</span>
      <div class="param-modal-header">
        <h2 id="param-detail-title">Oxigênio</h2>
        <div id="param-detail-value" class="param-detail-value">5.8 mg/L</div>
        <div id="param-detail-status" class="param-detail-status status-good">Bom</div>
      </div>
      <div class="param-detail-body">
        <div class="param-detail-chart">
          <canvas id="param-history-chart"></canvas>
        </div>
        <div class="param-detail-info">
          <h4>Informações</h4>
          <p>Último registro: <strong id="param-last-update">Hoje, 15:30</strong></p>
          <p>Média dos últimos 7 dias: <strong id="param-average">5.7 mg/L</strong></p>
          <p>Tendência dos últimos 30 dias: <strong id="param-trend"><span style="color: #28a745"><i class="fas fa-arrow-up"></i> Em alta</span></strong></p>
        </div>
        <div class="param-detail-actions">
          <button class="btn btn-primary">Ver histórico completo</button>
          <button class="btn btn-outline-primary">Exportar dados</button>
          <button class="btn btn-outline-primary">Ver relatório mensal</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat Flutuante -->
  <div class="floating-chat-container" id="floating-chat-container">
    <!-- Botão de Chat -->
    <div class="chat-toggle-btn" id="chat-toggle-btn">
      <i class="fas fa-comments"></i>
      <span class="badge" id="chat-badge" style="display: none;">0</span>
    </div>

    <!-- As janelas de chat serão adicionadas dinamicamente aqui -->
  </div>

  <!-- Scripts -->
  <script src="js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="js/notifications.js"></script>
  <script src="js/floating-chat.js"></script>
  <script src="js/user-status.js"></script>
  <script src="js/group-chat.js"></script>
  <script src="js/file-attachments.js"></script>
  <script src="js/water-params.js?v=1.1"></script>

  <!-- Script inline para renderizar os gráficos -->
  <script>
    // Executar quando o DOM estiver carregado
    document.addEventListener('DOMContentLoaded', function () {
      console.log('DOM carregado, inicializando gráficos...');

      // Renderizar gráficos dos cards
      renderCardCharts();

      // Renderizar gráficos dos tanques
      renderTankCharts();
    });

    // Renderizar os gráficos dos cards
    function renderCardCharts() {
      console.log('Renderizando gráficos dos cards...');

      // Gráfico de Análises
      renderDoughnutChart('analises-chart', ['Concluídas', 'Pendentes'], [75, 25], ['#0056b3', '#e9ecef']);

      // Gráfico de Ciclos
      renderDoughnutChart('ciclos-chart', ['Ativos', 'Inativos'], [42, 18], ['#28a745', '#e9ecef']);

      // Gráfico de Produção
      renderDoughnutChart('producao-chart', ['Realizado', 'Meta'], [65, 35], ['#ffc107', '#e9ecef']);

      // Gráfico de Conclusão
      renderDoughnutChart('conclusao-chart', ['Concluído', 'Pendente'], [87, 13], ['#17a2b8', '#e9ecef']);
    }

    // Renderizar os gráficos dos tanques
    function renderTankCharts() {
      console.log('Renderizando gráficos dos tanques...');

      // Gráfico de Tanques com Maior Crescimento
      renderTanquesCrescimentoChart();

      // Gráfico de Distribuição por Tanque
      renderDistribuicaoTanquesChart();

      // Gráfico de Tanques com Menor Mortalidade
      renderTanquesMortalidadeChart();

      // Gráfico de Sobrevivência Média
      renderSobrevivenciaMediaChart();
    }

    // Função auxiliar para renderizar gráficos de rosca
    function renderDoughnutChart(canvasId, labels, data, colors) {
      const canvas = document.getElementById(canvasId);
      if (!canvas) {
        console.error(`Canvas ${canvasId} não encontrado`);
        return;
      }

      console.log(`Renderizando gráfico ${canvasId}...`);

      try {
        new Chart(canvas, {
          type: 'doughnut',
          data: {
            labels: labels,
            datasets: [{
              data: data,
              backgroundColor: colors,
              borderWidth: 0
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '70%',
            plugins: {
              legend: {
                display: false
              },
              tooltip: {
                enabled: false
              }
            }
          }
        });
        console.log(`Gráfico ${canvasId} renderizado com sucesso`);
      } catch (error) {
        console.error(`Erro ao renderizar gráfico ${canvasId}:`, error);
      }
    }

    // Gráfico de Tanques com Maior Crescimento
    function renderTanquesCrescimentoChart() {
      const canvas = document.getElementById('crescimento-chart');
      if (!canvas) {
        console.error('Canvas crescimento-chart não encontrado');
        return;
      }

      try {
        new Chart(canvas, {
          type: 'line',
          data: {
            labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai'],
            datasets: [
              {
                label: 'Tanque V01',
                data: [0.5, 0.7, 0.9, 1.1, 1.2],
                borderColor: '#28a745',
                backgroundColor: 'rgba(40, 167, 69, 0.1)',
                tension: 0.4,
                fill: true
              },
              {
                label: 'Tanque V05',
                data: [0.4, 0.6, 0.8, 0.9, 1.1],
                borderColor: '#0056b3',
                backgroundColor: 'rgba(0, 86, 179, 0.1)',
                tension: 0.4,
                fill: true
              },
              {
                label: 'Tanque V08',
                data: [0.3, 0.5, 0.7, 0.8, 0.9],
                borderColor: '#ffc107',
                backgroundColor: 'rgba(255, 193, 7, 0.1)',
                tension: 0.4,
                fill: true
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'top'
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                title: {
                  display: true,
                  text: 'Crescimento (g/semana)'
                }
              }
            }
          }
        });
        console.log('Gráfico crescimento-chart renderizado com sucesso');
      } catch (error) {
        console.error('Erro ao renderizar gráfico crescimento-chart:', error);
      }
    }

    // Gráfico de Distribuição por Tanque
    function renderDistribuicaoTanquesChart() {
      const canvas = document.getElementById('distribuicao-tanques-chart');
      if (!canvas) {
        console.error('Canvas distribuicao-tanques-chart não encontrado');
        return;
      }

      try {
        new Chart(canvas, {
          type: 'doughnut',
          data: {
            labels: ['Berçário', 'Crescimento', 'Engorda', 'Maturação'],
            datasets: [{
              data: [15, 25, 40, 20],
              backgroundColor: [
                '#0056b3',
                '#28a745',
                '#ffc107',
                '#17a2b8'
              ],
              borderWidth: 0
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '65%',
            plugins: {
              legend: {
                position: 'bottom'
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return `${context.label}: ${context.raw} tanques`;
                  }
                }
              }
            }
          }
        });
        console.log('Gráfico distribuicao-tanques-chart renderizado com sucesso');
      } catch (error) {
        console.error('Erro ao renderizar gráfico distribuicao-tanques-chart:', error);
      }
    }

    // Gráfico de Tanques com Menor Mortalidade
    function renderTanquesMortalidadeChart() {
      const canvas = document.getElementById('mortalidade-chart');
      if (!canvas) {
        console.error('Canvas mortalidade-chart não encontrado');
        return;
      }

      try {
        new Chart(canvas, {
          type: 'line',
          data: {
            labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai'],
            datasets: [
              {
                label: 'Tanque V03',
                data: [99, 98.5, 98.2, 98, 98],
                borderColor: '#17a2b8',
                backgroundColor: 'rgba(23, 162, 184, 0.1)',
                tension: 0.4,
                fill: true
              },
              {
                label: 'Tanque V07',
                data: [99, 98, 97.5, 97.2, 97],
                borderColor: '#6f42c1',
                backgroundColor: 'rgba(111, 66, 193, 0.1)',
                tension: 0.4,
                fill: true
              },
              {
                label: 'Tanque V09',
                data: [98.5, 97.5, 97, 96.5, 96],
                borderColor: '#fd7e14',
                backgroundColor: 'rgba(253, 126, 20, 0.1)',
                tension: 0.4,
                fill: true
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'top'
              }
            },
            scales: {
              y: {
                min: 95,
                max: 100,
                title: {
                  display: true,
                  text: 'Taxa de Sobrevivência (%)'
                }
              }
            }
          }
        });
        console.log('Gráfico mortalidade-chart renderizado com sucesso');
      } catch (error) {
        console.error('Erro ao renderizar gráfico mortalidade-chart:', error);
      }
    }

    // Gráfico de Sobrevivência Média
    function renderSobrevivenciaMediaChart() {
      const canvas = document.getElementById('sobrevivencia-media-chart');
      if (!canvas) {
        console.error('Canvas sobrevivencia-media-chart não encontrado');
        return;
      }

      try {
        new Chart(canvas, {
          type: 'doughnut',
          data: {
            labels: ['Sobrevivência', 'Mortalidade'],
            datasets: [{
              data: [95, 5],
              backgroundColor: [
                '#17a2b8',
                '#e9ecef'
              ],
              borderWidth: 0
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '75%',
            plugins: {
              legend: {
                position: 'bottom'
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return `${context.label}: ${context.raw}%`;
                  }
                }
              }
            }
          }
        });
        console.log('Gráfico sobrevivencia-media-chart renderizado com sucesso');
      } catch (error) {
        console.error('Erro ao renderizar gráfico sobrevivencia-media-chart:', error);
      }
    }
  </script>
  <script>
    // Initialize dashboard data when page loads
    document.addEventListener('DOMContentLoaded', function () {
      if (typeof loadDashboardData === 'function') {
        loadDashboardData();
      }

      if (typeof loadNotifications === 'function') {
        loadNotifications();
      }
    });
  </script>
</body>

</html>