<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camanor - Dashboard de Ciclo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/notifications.css">
    <link rel="stylesheet" href="css/attachments.css">
    <link rel="stylesheet" href="css/water-params.css">
    <link rel="stylesheet" href="css/arracoamentos.css">
    <link rel="stylesheet" href="css/insumos.css">
    <link rel="stylesheet" href="css/param-history.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="icon" href="img/favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="img/logo_camanor.png" alt="Camanor" class="sidebar-logo">
            </div>
            
            <ul class="sidebar-menu">
                <li class="sidebar-menu-item">
                    <a href="dashboard.html" class="sidebar-menu-link">
                        <span class="sidebar-menu-icon"><i class="fas fa-home"></i></span>
                        <span class="sidebar-menu-text">Dashboard</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="analises.html" class="sidebar-menu-link">
                        <span class="sidebar-menu-icon"><i class="fas fa-chart-line"></i></span>
                        <span class="sidebar-menu-text">Análises</span>
                    </a>
                </li>
                <li class="sidebar-menu-item active">
                    <a href="ciclo-dashboard.html" class="sidebar-menu-link">
                        <span class="sidebar-menu-icon"><i class="fas fa-sync-alt"></i></span>
                        <span class="sidebar-menu-text">Ciclos</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link">
                        <span class="sidebar-menu-icon"><i class="fas fa-flask"></i></span>
                        <span class="sidebar-menu-text">Análises Bacteriológicas</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link">
                        <span class="sidebar-menu-icon"><i class="fas fa-vial"></i></span>
                        <span class="sidebar-menu-text">Análises Bioensaios</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link">
                        <span class="sidebar-menu-icon"><i class="fas fa-microscope"></i></span>
                        <span class="sidebar-menu-text">Análises Biométricas</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link">
                        <span class="sidebar-menu-icon"><i class="fas fa-prescription-bottle"></i></span>
                        <span class="sidebar-menu-text">Aplicações de Insumos</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link">
                        <span class="sidebar-menu-icon"><i class="fas fa-fish"></i></span>
                        <span class="sidebar-menu-text">Arraçoamentos</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="contato.html" class="sidebar-menu-link">
                        <span class="sidebar-menu-icon"><i class="fas fa-envelope"></i></span>
                        <span class="sidebar-menu-text">Contato</span>
                    </a>
                </li>
            </ul>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <button id="sidebar-toggle" class="btn-icon">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="ciclo-selector">
                    <select id="ciclo-select" class="form-control">
                        <option value="1">Ciclo #1 - Tanque V01 (Ativo)</option>
                        <option value="2">Ciclo #2 - Tanque V02 (Ativo)</option>
                        <option value="3">Ciclo #3 - Tanque V03 (Finalizado)</option>
                        <option value="4">Ciclo #4 - Tanque V04 (Ativo)</option>
                        <option value="5">Ciclo #5 - Tanque V05 (Ativo)</option>
                    </select>
                </div>
                
                <div class="user-menu">
                    <div class="notification-container">
                        <button class="btn-icon notification-btn" id="notification-toggle">
                            <i class="fas fa-bell"></i>
                            <span class="badge-icon">3</span>
                        </button>
                        
                        <!-- Dropdown de Notificações -->
                        <div class="notifications-dropdown" id="notifications-dropdown">
                            <div class="notifications-header">
                                <h3>Notificações</h3>
                                <button class="mark-all-read">Marcar todas como lidas</button>
                            </div>
                            <div class="notifications-body">
                                <div class="notification-item unread" data-user="maria" data-chat-id="maria">
                                    <img src="img/user1.jpg" alt="Maria Santos" class="notification-avatar">
                                    <div class="notification-content">
                                        <div class="notification-title">Maria Santos</div>
                                        <div class="notification-message">Precisamos verificar os parâmetros do tanque V03 hoje.</div>
                                        <div class="notification-time">10:30</div>
                                    </div>
                                </div>
                                <div class="notification-item unread" data-user="carlos" data-chat-id="carlos">
                                    <img src="img/user2.jpg" alt="Carlos Oliveira" class="notification-avatar">
                                    <div class="notification-content">
                                        <div class="notification-title">Carlos Oliveira</div>
                                        <div class="notification-message">O relatório de biometria está concluído. Preciso da sua aprovação.</div>
                                        <div class="notification-time">09:15</div>
                                    </div>
                                </div>
                                <div class="notification-item unread" data-user="ana" data-chat-id="ana">
                                    <img src="img/user3.jpg" alt="Ana Silva" class="notification-avatar">
                                    <div class="notification-content">
                                        <div class="notification-title">Ana Silva</div>
                                        <div class="notification-message">Precisamos discutir o arraçoamento do ciclo #42 com urgência.</div>
                                        <div class="notification-time">Ontem</div>
                                    </div>
                                </div>
                            </div>
                            <div class="notifications-footer">
                                <a href="messenger.html">Ver todas as mensagens</a>
                            </div>
                        </div>
                    </div>
                    
                    <img src="img/user.png" alt="Usuário" class="user-avatar">
                    <div class="user-info">
                        <span class="user-name">João Silva</span>
                        <span class="user-role">Administrador</span>
                        <div class="user-status-selector">
                            <span class="current-status">
                                <span class="status-badge status-online"></span>
                                <span class="status-text">Online</span>
                                <i class="fas fa-chevron-down"></i>
                            </span>
                            <div class="status-dropdown">
                                <div class="status-option" data-status="online">
                                    <span class="status-badge status-online"></span>
                                    <span>Online</span>
                                </div>
                                <div class="status-option" data-status="away">
                                    <span class="status-badge status-away"></span>
                                    <span>Ausente</span>
                                </div>
                                <div class="status-option" data-status="busy">
                                    <span class="status-badge status-busy"></span>
                                    <span>Ocupado</span>
                                </div>
                                <div class="status-option" data-status="offline">
                                    <span class="status-badge status-offline"></span>
                                    <span>Aparecer Offline</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ciclo Header -->
            <div class="ciclo-header">
                <div class="ciclo-info">
                    <h1 class="ciclo-title">Ciclo #1 - Tanque V01</h1>
                    <div class="ciclo-meta">
                        <span class="ciclo-status active">Ativo</span>
                        <span class="ciclo-date"><i class="far fa-calendar-alt"></i> Início: 15/01/2025</span>
                        <span class="ciclo-days"><i class="far fa-clock"></i> Dias de cultivo: 112</span>
                    </div>
                </div>
                <div class="ciclo-actions">
                    <button class="btn btn-outline-primary"><i class="fas fa-print"></i> Relatório</button>
                    <button class="btn btn-outline-primary"><i class="fas fa-file-export"></i> Exportar</button>
                    <button class="btn btn-primary"><i class="fas fa-cog"></i> Gerenciar</button>
                </div>
            </div>
            
            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Resumo do Ciclo -->
                <div class="section-header">
                    <h2 class="section-title">Resumo do Ciclo</h2>
                </div>
                
                <div class="dashboard-cards">
                    <div class="dashboard-card animate-on-load resume-cards">
                        <div class="dashboard-card-header">
                            <h3 class="dashboard-card-title">Biomassa</h3>
                            <div class="dashboard-card-icon" style="background-color: #0056b3;">
                                <i class="fas fa-weight"></i>
                            </div>
                        </div>
                        <div class="dashboard-card-value">87.5 kg</div>
                        <div class="dashboard-card-label">Crescimento de 12% este mês</div>
                    </div>
                    
                    <div class="dashboard-card animate-on-load resume-cards">
                        <div class="dashboard-card-header">
                            <h3 class="dashboard-card-title">Sobrevivência</h3>
                            <div class="dashboard-card-icon" style="background-color: #28a745;">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                        </div>
                        <div class="dashboard-card-value">87%</div>
                        <div class="dashboard-card-label">Estável nos últimos 30 dias</div>
                    </div>
                    
                    <div class="dashboard-card animate-on-load resume-cards">
                        <div class="dashboard-card-header">
                            <h3 class="dashboard-card-title">Peso Médio</h3>
                            <div class="dashboard-card-icon" style="background-color: #ffc107;">
                                <i class="fas fa-balance-scale"></i>
                            </div>
                        </div>
                        <div class="dashboard-card-value">12,5g</div>
                        <div class="dashboard-card-label">Crescimento de 0,8g na última semana</div>
                    </div>
                    
                    <div class="dashboard-card animate-on-load resume-cards">
                        <div class="dashboard-card-header">
                            <h3 class="dashboard-card-title">Densidade</h3>
                            <div class="dashboard-card-icon" style="background-color: #17a2b8;">
                                <i class="fas fa-compress-arrows-alt"></i>
                            </div>
                        </div>
                        <div class="dashboard-card-value">30 cam/m²</div>
                        <div class="dashboard-card-label">Densidade ideal para cultivo semi-intensivo</div>
                    </div>
                </div>
            </div>
            
            <!-- Parâmetros de Qualidade de Água -->
            <div class="water-quality-container animate-on-load">
                <h2 class="section-title">Parâmetros de Qualidade de Água</h2>
                <div class="water-quality-buttons">
                    <button class="water-param-btn oxygen-btn animate-pulse">
                        <div class="param-icon">
                            <i class="fas fa-wind"></i>
                        </div>
                        <div class="param-info">
                            <span class="param-name">Oxigênio</span>
                            <span class="param-value">5.8 mg/L</span>
                        </div>
                        <div class="param-status good"></div>
                    </button>
                    
                    <button class="water-param-btn ph-btn animate-pulse">
                        <div class="param-icon">
                            <i class="fas fa-flask"></i>
                        </div>
                        <div class="param-info">
                            <span class="param-name">pH</span>
                            <span class="param-value">7.2</span>
                        </div>
                        <div class="param-status good"></div>
                    </button>
                    
                    <button class="water-param-btn temperature-btn animate-pulse">
                        <div class="param-icon">
                            <i class="fas fa-temperature-high"></i>
                        </div>
                        <div class="param-info">
                            <span class="param-name">Temperatura</span>
                            <span class="param-value">28.5 °C</span>
                        </div>
                        <div class="param-status good"></div>
                    </button>
                    
                    <button class="water-param-btn salinity-btn animate-pulse">
                        <div class="param-icon">
                            <i class="fas fa-tint"></i>
                        </div>
                        <div class="param-info">
                            <span class="param-name">Salinidade</span>
                            <span class="param-value">12 ppt</span>
                        </div>
                        <div class="param-status warning"></div>
                    </button>
                    
                    <button class="water-param-btn ammonia-btn animate-pulse">
                        <div class="param-icon">
                            <i class="fas fa-vial"></i>
                        </div>
                        <div class="param-info">
                            <span class="param-name">Amônia</span>
                            <span class="param-value">0.05 mg/L</span>
                        </div>
                        <div class="param-status good"></div>
                    </button>
                    
                    <button class="water-param-btn nitrite-btn animate-pulse">
                        <div class="param-icon">
                            <i class="fas fa-atom"></i>
                        </div>
                        <div class="param-info">
                            <span class="param-name">Nitrito</span>
                            <span class="param-value">0.01 mg/L</span>
                        </div>
                        <div class="param-status good"></div>
                    </button>
                </div>
            </div>

            <!-- Seção de Arraçoamentos -->
            <div class="arracoamentos-container animate-on-load">
                <div class="arracoamentos-header">
                    <h3 class="arracoamentos-title">Arraçoamentos</h3>
                    <div class="arracoamentos-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-plus"></i> Novo Arraçoamento
                        </button>
                        <a href="#" class="btn btn-sm btn-outline-secondary ml-2" id="btn-filtro-simples">
                            <i class="fas fa-filter"></i> Filtrar
                        </a>
                    </div>
                </div>
                <div class="arracoamentos-content">
                    <!-- Cards de resumo -->
                    <div class="arracoamentos-summary">
                        <div class="arracoamentos-summary-card racao">
                            <i class="fas fa-shrimp icon"></i>
                            <h4>Ração</h4>
                            <div class="value">9.7 kg</div>
                        </div>
                        <div class="arracoamentos-summary-card probiotico">
                            <i class="fas fa-pills icon"></i>
                            <h4>Probiótico</h4>
                            <div class="value">0.67 kg</div>
                        </div>
                        <div class="arracoamentos-summary-card aditivo">
                            <i class="fas fa-vial icon"></i>
                            <h4>Aditivo</h4>
                            <div class="value">0.18 kg</div>
                        </div>
                        <div class="arracoamentos-summary-card vitamina">
                            <i class="fas fa-capsules icon"></i>
                            <h4>Vitamina</h4>
                            <div class="value">0.15 kg</div>
                        </div>
                    </div>

                    <!-- Gráfico de arraçoamentos -->
                    <div class="arracoamentos-chart-container">
                        <canvas id="arracoamentos-chart"></canvas>
                    </div>

                    <!-- Tabela de arraçoamentos -->
                    <div class="arracoamentos-table-container">
                        <table class="arracoamentos-table" id="arracoamentos-table">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Total</th>
                                    <th>Mortalidade</th>
                                    <th>Detalhes</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Preenchido via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Seção de Insumos -->
            <div class="insumos-container animate-on-load">
                <div class="insumos-header">
                    <h3 class="insumos-title">Insumos</h3>
                    <div class="insumos-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-plus"></i> Novo Insumo
                        </button>
                        <a href="#" class="btn btn-sm btn-outline-secondary ml-2" id="btn-filtro-insumos">
                            <i class="fas fa-filter"></i> Filtrar
                        </a>
                    </div>
                </div>
                <div class="insumos-content">
                    <!-- Cards de resumo -->
                    <div class="insumos-summary">
                        <div class="insumos-summary-card cloro">
                            <i class="fas fa-flask icon"></i>
                            <h4>Cloro</h4>
                            <div class="value">2.5 kg</div>
                        </div>
                        <div class="insumos-summary-card calcario">
                            <i class="fas fa-mountain icon"></i>
                            <h4>Calcário</h4>
                            <div class="value">15.0 kg</div>
                        </div>
                        <div class="insumos-summary-card melaco">
                            <i class="fas fa-fill-drip icon"></i>
                            <h4>Melaço</h4>
                            <div class="value">8.3 kg</div>
                        </div>
                        <div class="insumos-summary-card outros">
                            <i class="fas fa-boxes icon"></i>
                            <h4>Outros</h4>
                            <div class="value">4.7 kg</div>
                        </div>
                    </div>

                    <!-- Gráfico de insumos -->
                    <div class="insumos-chart-container">
                        <canvas id="insumos-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="spacer" style="height: 20px;"></div>

            <!-- Tabela de Registros do Ciclo -->
            <div class="table-container animate-on-load">
                <div class="table-header">
                    <h3 class="table-title">Registros do Ciclo</h3>
                    <div class="table-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-filter"></i> Filtrar
                        </button>
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-download"></i> Exportar
                        </button>
                    </div>
                </div>
                
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Fase</th>
                                <th>Peso Médio</th>
                                <th>Biomassa</th>
                                <th>Sobrevivência</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>05/05/2025</td>
                                <td>Crescimento</td>
                                <td>12.5g</td>
                                <td>87.5kg</td>
                                <td>92%</td>
                                <td>
                                    <button class="btn btn-sm btn-icon btn-outline-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-icon btn-outline-secondary">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>28/04/2025</td>
                                <td>Crescimento</td>
                                <td>10.2g</td>
                                <td>71.4kg</td>
                                <td>93%</td>
                                <td>
                                    <button class="btn btn-sm btn-icon btn-outline-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-icon btn-outline-secondary">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>21/04/2025</td>
                                <td>Crescimento</td>
                                <td>8.7g</td>
                                <td>60.9kg</td>
                                <td>95%</td>
                                <td>
                                    <button class="btn btn-sm btn-icon btn-outline-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-icon btn-outline-secondary">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal de Detalhes do Parâmetro -->
    <div id="param-detail-modal" class="param-modal">
        <div class="param-modal-content">
            <span class="param-modal-close">&times;</span>
            <div class="param-modal-header">
                <h2 id="param-detail-title">Oxigênio</h2>
                <div id="param-detail-value" class="param-detail-value">5.8 mg/L</div>
                <div id="param-detail-status" class="param-detail-status status-good">Bom</div>
            </div>
            <div class="param-detail-body">
                <div class="param-detail-chart">
                    <canvas id="param-history-chart"></canvas>
                </div>
                <div class="param-detail-info">
                    <h4>Informações</h4>
                    <p>Último registro: <strong id="param-last-update">Hoje, 15:30</strong></p>
                    <p>Média dos últimos 7 dias: <strong id="param-average">5.7 mg/L</strong></p>
                    <p>Tendência dos últimos 30 dias: <strong id="param-trend"><span style="color: #28a745"><i class="fas fa-arrow-up"></i> Em alta</span></strong></p>
                </div>
                <div class="param-detail-actions">
                    <button class="btn btn-primary">Ver histórico completo</button>
                    <button class="btn btn-outline-primary">Exportar dados</button>
                    <button class="btn btn-outline-primary">Ver relatório mensal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Arraçoamento -->
    <div id="arracoamento-detail-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div class="modal-header">
                <h2 id="arracoamento-detail-title">Detalhes do Arraçoamento</h2>
                <div id="arracoamento-detail-date" class="detail-date">05/05/2025</div>
            </div>
            <div class="modal-body">
                <div class="detail-section">
                    <h3>Resumo</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">Total Aplicado:</span>
                            <span id="arracoamento-detail-total" class="detail-value">3.90 kg</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Mortalidade:</span>
                            <span id="arracoamento-detail-mortality" class="detail-value">25 unid.</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Situação:</span>
                            <span id="arracoamento-detail-status" class="detail-value">Validado</span>
                        </div>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3>Aplicações</h3>
                    <table class="detail-table" id="arracoamento-detail-applications">
                        <thead>
                            <tr>
                                <th>Tipo</th>
                                <th>Quantidade</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Preenchido via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div class="detail-section">
                    <h3>Observações</h3>
                    <p id="arracoamento-detail-notes">Nenhuma observação registrada.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-secondary modal-close-btn">Fechar</button>
                <button class="btn btn-primary">Editar</button>
            </div>
        </div>
    </div>
    
    <!-- Modal de Histórico Completo do Parâmetro -->
    <div id="param-history-modal" class="modal full-history-modal">
        <div class="modal-content large-modal">
            <span class="modal-close">&times;</span>
            <div class="modal-header">
                <h2 id="param-history-title">Histórico Completo - Oxigênio</h2>
                <div class="header-actions">
                    <div class="date-range-selector">
                        <select id="history-period-selector" class="form-control">
                            <option value="30">30 dias</option>
                            <option value="90">90 dias</option>
                            <option value="180">6 meses</option>
                            <option value="365">1 ano</option>
                            <option value="custom">Período personalizado</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="history-chart-container">
                    <canvas id="full-history-chart"></canvas>
                </div>
                
                <div class="history-stats">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Média</span>
                            <span id="history-average" class="stat-value">5.7 mg/L</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Mínimo</span>
                            <span id="history-min" class="stat-value">4.9 mg/L</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Máximo</span>
                            <span id="history-max" class="stat-value">6.3 mg/L</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Desvio Padrão</span>
                            <span id="history-std" class="stat-value">0.3 mg/L</span>
                        </div>
                    </div>
                </div>
                
                <div class="history-table-container">
                    <h3>Registros</h3>
                    <table class="history-table" id="param-history-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Hora</th>
                                <th>Valor</th>
                                <th>Status</th>
                                <th>Observações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Preenchido via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-secondary modal-close-btn">Fechar</button>
                <button class="btn btn-outline-primary" id="export-history-btn">
                    <i class="fas fa-file-export"></i> Exportar Dados
                </button>
                <button class="btn btn-primary" id="print-history-btn">
                    <i class="fas fa-print"></i> Imprimir
                </button>
            </div>
        </div>
    </div>

    <!-- Chat Flutuante -->
    <div class="floating-chat-container" id="floating-chat-container">
        <!-- Botão de Chat -->
        <div class="chat-toggle-btn" id="chat-toggle-btn">
            <i class="fas fa-comments"></i>
            <span class="badge" id="chat-badge" style="display: none;">0</span>
        </div>
        
        <!-- As janelas de chat serão adicionadas dinamicamente aqui -->
    </div>
    
    <script src="js/main.js"></script>
    <script src="js/ciclo-dashboard.js"></script>
    <script src="js/notifications.js"></script>
    <!-- Modal de Filtro de Arraçoamentos (Versão Simplificada) -->
    <div id="modal-filtro-simples" style="display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); overflow: auto;">
        <div style="background-color: white; margin: 10% auto; padding: 20px; width: 80%; max-width: 600px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">Filtrar Arraçoamentos</h2>
                <span id="fechar-modal-filtro" style="font-size: 24px; cursor: pointer;">&times;</span>
            </div>
            
            <form id="form-filtro-simples">
                <div style="margin-bottom: 20px;">
                    <label for="filtro-racao-simples" style="display: block; margin-bottom: 5px; font-weight: 500;">Ração:</label>
                    <select id="filtro-racao-simples" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="">Todas as rações</option>
                        <option value="189">RAÇÃO CANA BRAVA FG</option>
                        <option value="226">RAÇÃO CB FG STARTER #2</option>
                        <option value="227">RAÇÃO CB FG STARTER #2</option>
                        <option value="228">RAÇÃO AR FG</option>
                        <option value="237">RAÇÃO ARATUÁ FG - ARFG</option>
                        <option value="238">RAÇÃO ARATUÁ 02 - AR 02</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">Período:</label>
                    <div style="display: flex; gap: 15px;">
                        <div style="flex: 1;">
                            <label for="filtro-data-inicio-simples" style="display: block; margin-bottom: 5px;">De:</label>
                            <input type="date" id="filtro-data-inicio-simples" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div style="flex: 1;">
                            <label for="filtro-data-fim-simples" style="display: block; margin-bottom: 5px;">Até:</label>
                            <input type="date" id="filtro-data-fim-simples" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 10px;">
                    <button type="button" id="limpar-filtro-simples" class="btn btn-secondary">Limpar</button>
                    <button type="submit" class="btn btn-primary">Aplicar Filtro</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Filtro de Insumos -->
    <div id="modal-filtro-insumos" style="display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); overflow: auto;">
        <div style="background-color: white; margin: 10% auto; padding: 20px; width: 80%; max-width: 600px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">Filtrar Insumos</h2>
                <span id="fechar-modal-insumos" style="font-size: 24px; cursor: pointer;">&times;</span>
            </div>
            
            <form id="form-filtro-insumos">
                <div style="margin-bottom: 20px;">
                    <label for="filtro-insumo-simples" style="display: block; margin-bottom: 5px; font-weight: 500;">Insumo:</label>
                    <select id="filtro-insumo-simples" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="">Todos os insumos</option>
                        <option value="55">HIPOCLORITO DE CALCIO 65% (CLORO)</option>
                        <option value="21">CARBONATO DE SODIO</option>
                        <option value="117">LITHONUTRI</option>
                        <option value="116">LITHONUTRI FAREL</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">Período:</label>
                    <div style="display: flex; gap: 15px;">
                        <div style="flex: 1;">
                            <label for="filtro-data-inicio-insumos" style="display: block; margin-bottom: 5px;">De:</label>
                            <input type="date" id="filtro-data-inicio-insumos" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div style="flex: 1;">
                            <label for="filtro-data-fim-insumos" style="display: block; margin-bottom: 5px;">Até:</label>
                            <input type="date" id="filtro-data-fim-insumos" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 10px;">
                    <button type="button" id="limpar-filtro-insumos" class="btn btn-secondary">Limpar</button>
                    <button type="submit" class="btn btn-primary">Aplicar Filtro</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/floating-chat.js"></script>
    <script src="js/user-status.js"></script>
    <script src="js/group-chat.js"></script>
    <script src="js/file-attachments.js"></script>
    <script src="js/water-params.js?v=1.1"></script>
    <script src="js/arracoamentos.js"></script>
    <script src="js/insumos.js"></script>
    
    <!-- Script para os modais de filtro -->
    <script>
        // Funções para os modais de filtro
        function abrirModalFiltro() {
            console.log('Abrindo modal de filtro de arraçoamentos...');
            const modal = document.getElementById('modal-filtro-simples');
            if (modal) {
                console.log('Modal encontrado, exibindo...');
                modal.style.display = 'block';
            } else {
                console.error('Modal não encontrado!');
            }
        }
        
        function abrirModalFiltroInsumos() {
            console.log('Abrindo modal de filtro de insumos...');
            const modal = document.getElementById('modal-filtro-insumos');
            if (modal) {
                console.log('Modal encontrado, exibindo...');
                modal.style.display = 'block';
            } else {
                console.error('Modal não encontrado!');
            }
        }
        
        // Configurando eventos quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', function() {
            // Limpar elementos duplicados que possam ter sido criados em carregamentos anteriores
            const limparElementosDuplicados = function() {
                // Selecionar elementos que possam estar duplicados
                const containers = document.querySelectorAll('.notifications-body');
                containers.forEach(container => {
                    // Manter apenas os elementos originais
                    const items = container.querySelectorAll('.notification-item');
                    const uniqueIds = new Set();
                    items.forEach(item => {
                        const id = item.dataset.chatId;
                        if (uniqueIds.has(id)) {
                            container.removeChild(item);
                        } else {
                            uniqueIds.add(id);
                        }
                    });
                });
            };
            
            // Executar limpeza
            limparElementosDuplicados();
            // Configurar botão de filtro de arraçoamentos
            const btnFiltro = document.getElementById('btn-filtro-simples');
            if (btnFiltro) {
                console.log('Botão de filtro de arraçoamentos encontrado, adicionando evento...');
                btnFiltro.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Botão de filtro de arraçoamentos clicado!');
                    abrirModalFiltro();
                });
            } else {
                console.error('Botão de filtro de arraçoamentos não encontrado!');
            }
            
            // Configurar botão de filtro de insumos
            const btnFiltroInsumos = document.getElementById('btn-filtro-insumos');
            if (btnFiltroInsumos) {
                console.log('Botão de filtro de insumos encontrado, adicionando evento...');
                btnFiltroInsumos.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Botão de filtro de insumos clicado!');
                    abrirModalFiltroInsumos();
                });
            } else {
                console.error('Botão de filtro de insumos não encontrado!');
            }
            
            // Configurar botão de fechar modal de arraçoamentos
            const btnFechar = document.getElementById('fechar-modal-filtro');
            if (btnFechar) {
                btnFechar.addEventListener('click', function() {
                    document.getElementById('modal-filtro-simples').style.display = 'none';
                });
            }
            
            // Configurar botão de fechar modal de insumos
            const btnFecharInsumos = document.getElementById('fechar-modal-insumos');
            if (btnFecharInsumos) {
                btnFecharInsumos.addEventListener('click', function() {
                    document.getElementById('modal-filtro-insumos').style.display = 'none';
                });
            }
            
            const formFiltro = document.getElementById('form-filtro-simples');
            if (formFiltro) {
                formFiltro.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Obter valores dos filtros
                    const racaoSelecionada = document.getElementById('filtro-racao-simples').value;
                    const dataInicio = document.getElementById('filtro-data-inicio-simples').value;
                    const dataFim = document.getElementById('filtro-data-fim-simples').value;
                    
                    // Aplicar filtros (exemplo de implementação)
                    console.log('Filtros aplicados:');
                    console.log('Ração ID:', racaoSelecionada);
                    console.log('Data início:', dataInicio);
                    console.log('Data fim:', dataFim);
                    
                    // Aqui você pode implementar a lógica real de filtro
                    // Por exemplo, filtrar os dados de arraçoamentos com base nos valores selecionados
                    
                    // Fechar o modal
                    document.getElementById('modal-filtro-simples').style.display = 'none';
                    
                    // Mostrar mensagem de sucesso
                    const racaoTexto = racaoSelecionada ? document.querySelector(`#filtro-racao-simples option[value="${racaoSelecionada}"]`).textContent : 'Todas as rações';
                    const mensagem = `Filtros aplicados: ${racaoTexto}${dataInicio ? `, de ${dataInicio}` : ''}${dataFim ? ` até ${dataFim}` : ''}`;
                    
                    // Criar elemento de notificação
                    const notificacao = document.createElement('div');
                    notificacao.style.position = 'fixed';
                    notificacao.style.bottom = '20px';
                    notificacao.style.right = '20px';
                    notificacao.style.backgroundColor = '#4CAF50';
                    notificacao.style.color = 'white';
                    notificacao.style.padding = '15px';
                    notificacao.style.borderRadius = '5px';
                    notificacao.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';
                    notificacao.style.zIndex = '9999';
                    notificacao.textContent = mensagem;
                    
                    // Adicionar à página
                    document.body.appendChild(notificacao);
                    
                    // Remover após 5 segundos
                    setTimeout(() => {
                        document.body.removeChild(notificacao);
                    }, 5000);
                });
            } else {
                console.error('Formulário de filtro não encontrado!');
            }
        });
    </script>
</body>
</html>
